{% extends "base.html" %}

{% load i18n static wagtailcore_tags %}

{% block body_class %}template-rtei by-country{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'vendor/c3/c3.css' %}">
{% endblock %}

{% block content %}
  <div class="main">

    <style>
    /* TODO: Move out of here */

    #chart {
        height: 120px;
    }

    .indicators_old .indicator > div {
        float: left;
        display: block;
        padding: 5px 10px;
    }

    .indicators_old .indicator-title {
        width: 90%;
    }

    .indicators_old .indicator-value {
        text-align: center;
    }

    .indicators_old  .level1 > div {
        background: #F97B5D;
        font-weight: bold;
    }

    .indicators_old  .level2 > div {
        background: #FDE8DD;
    }

    .indicators_old  .level2 .indicator-title {
        padding-left: 20px;
    }

    .indicators_old  .level3 .indicator-title {
        padding-left: 40px;
    }

    .indicators_old  .level4 .indicator-title {
        padding-left: 60px;
    }



    </style>
    <section>
    {% if not country_code %}
      {% if self.body %}
      {{ self.body|richtext }}
      {% else %}
      <h2>Lorem ipsum</h2>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eget nisl tempor, semper magna vel, faucibus lectus. Aliquam interdum pulvinar est quis dictum. Donec et mi sollicitudin, scelerisque nulla in, efficitur sem. Proin risus enim, finibus in metus scelerisque.
      </p>
      {% endif %}
    {% endif %}

    {% if country_code %}
      <button class="export">Export all</button>
    {% endif %}

      <div class="select">
        <select id="available-countries">
         {% if not country_code %}
            <option value="">{% trans "Select a country ..." %}</option>
         {% endif %}
         {% for code, name in available_countries.iteritems %}
         <option value="{{ code }}" {% if code == country_code %}selected="selected"{% endif%}>{{ name }}</option>
         {% endfor %}
        </select>
      </div>    
    </section>

    {% if country_code %}

    <section class="controls">
      left column
    </section>

    <section>
      <h2>{{ country_name }} ({{ country_code }})</h2>

      <div>{% trans "Overall Index" %}: {{ country_indicators.index }}</div>
      {% if chart_data %}
        <div id="chart" data-chart-data="{{ chart_data }}"></div>
      {% endif %}

        <div class="indicators" id="indicators">
            {% include 'rtei/tags/indicators.html' %}
        </div>
<!--
        <div class="indicators_old" id="indicators">
            {% include 'rtei/tags/indicators.html' %}
        </div>
-->
    </section>
    {% endif %}

  </div>

{% endblock %}

{% block extra_js %}
  <script src="{% static 'vendor/underscore-min.js' %}" type="text/javascript" charset="utf-8"></script>
  <script src="{% static 'vendor/d3/d3.min.js' %}" type="text/javascript" charset="utf-8"></script>
  <script src="{% static 'vendor/c3/c3.min.js' %}" type="text/javascript" ></script>
  <script src="{% static 'js/country.js' %}"></script>
{% endblock %}
